let response;
let responseHeaders;
let responseStatus;

try {
  const responseObject = await fetch(requestUrl, requestParams);
  responseHeaders = responseObject.headers;
  responseStatus = responseObject.status;
  response = await responseObject.json();

  if (!responseObject.ok) {
    if (!response) {
      throw new EmptyErroneousResponseError('Empty response');
    }

    throw new ApiError('Api error');
  }
} catch (error) {
  throw new ApiError('Api error');
}

if (!response) {
  throw new EmptyResponseError('Empty response');
}

return response;
